Description:

I want to make a chrome application and haskell library that interfaces with another haskell library designed to program music called tidalcycles.
The haskell library would be compiled to javascript, specifically the creative coding library p5.js, and sent to the chrome application to be rendered in real time.
Basically, I want a system that can generate live visuals in accordance with the live music generated by tidalcycles.


Competitive Analysis:
There have been several attempts to interface tidalcycles and live visuals, but for most attempts, their structure involves programming audio in tidalcycles, and programming visuals in strictly the rendering language.
There has been a couple attempts to provide such interface by the creator of tidalcycles, but both haven't made it past very early stages and are very restricted in what visuals can be generated.


Structural Plan:


box x y z -> box{x,y,z}


  Haskell:
    - StreamFunc.hs -- sends spontaniously defined functions to p5js script
    - P5.hs         -- data structure that allows conversion from
                        haskell to p5js statements around
          - P5Image.hs  -- implements p5.js expressions for manipulating pngs, gifs, etc.
                            (probably based around easy-to-call matrix transforms)

          - P5Canvas.hs -- implements basic drawing functions like ellipse(20,30,40,50)

          - P5gl.hs     -- implements p5.js expressions for webgl
                            (ie. box x y z --> spawn a box in the middle of the screen at coords (x,y,z))

          example code:
          (something like """
                          rotate (90 + time) ("40 50") (sine*20) $ pImage "kirb.png"
                          """
                          (90 + time) -- rotate X by 90 degrees + time Passed
                          ("40 50")   -- rotate Y by 40 degrees for the first half of a measure,
                          and 50 degrees for the second half of the measure
                          (sine*20)   -- rotate Z by a sinewave with frequency = 1 measure,
                          scaled up by a factor of 20

  ChromeApp:
    JavaScript:
      - superDirt.js -- recieves messages sent by tidalcycles,
                          turns them into either the js class 'Things' and 'Code'
        - p5functionClass.js -- class that stores expressions originally written P5.hs
        - thingClass.js      -- class that organizes stream of data from Tidal into
                                  an object for p5.js to render in time with the rendered audio

      - sclang.js    -- hosts supercollider server in-browser


Algorithmic Plan -
  Trickiest part: making sure any defined P5.hs statements can interface with tidal's pattern language:
                (ie. make sure that the tidal pattern "1 2 3 4 5" mapped to a function,
                     calls the function 5 times,
                     each with the given value,
                     and the same time as the audio)


                     (see notes)





Timeline Plan -
  week1 (now) - streamline installation and configuration
                  process of haskell + tidalcycles
                  (make sure everything is portable to other systems)

  week2       - send non-tidal messages over tidal connection
                  for use with p5-js/tidalcycles datastructure
              - create tidalcycles -> p5.js interface that can send and alter
                  drawing functions related to tidalcycles audio data

  week3       - refine aforementioned tidalcycles -> p5.js interface
              - write up accessible tutorial system for core functions


Version Control Plan -
  I'll be using github to keep track of versions


Module List:
- Haskell/Tidalcycles
- Supercollider/SuperDirt
- javascript/p5.js
